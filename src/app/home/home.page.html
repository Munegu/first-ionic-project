<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large" class="ion-text-center">Open Trivia</ion-title>
    </ion-toolbar>
  </ion-header>

  <div id="container" *ngIf='!valid'>

    <ion-item>
      <ion-label position="stacked">Votre pseudo</ion-label>
      <ion-input type="text" [(ngModel)]="pseudo"></ion-input>
    </ion-item>


    <ion-item>
      <ion-label class="ion-text-justify">Difficulté</ion-label>
      <ion-select [(ngModel)]="difficultyChoice">
        <ion-select-option *ngFor="let item of difficulty" [value] = "item">{{ item }}</ion-select-option>
      </ion-select>
    </ion-item>

     <ion-item>

      <ion-toggle [(ngModel)] = "save" style="margin-right: 30px"> </ion-toggle >
       <label for="save" >Sauvegarder les informations</label>
      
     </ion-item>


     <ion-button (click)="startQuiz()" style="margin-top: 30px" expand="full">
       Commencer
     </ion-button>
  </div>


  <div id="container" *ngIf='valid'>

   
    <ion-chip>
      <ion-avatar>
        <img [src]="randomUser">
      </ion-avatar>
      <ion-label>{{ pseudo }}</ion-label>
    </ion-chip>

      <h1 class="ion-text-center" [innerHTML]="currentQuestion?.question"></h1>
  
  
      <ion-grid>
          <ion-row>

            <ion-col size="6" *ngFor="let answer of responses">
              <ion-button expand="full" [color]="setColor(answer)" (click)="response(answer)" [innerHTML]="answer"></ion-button>
            </ion-col>

          </ion-row>

      </ion-grid>

      <ion-button expand="full" *ngIf="!end" (click)="nextQuestion()">Question suivante</ion-button>

      <ion-button expand="full" *ngIf="end" (click)="valid = false" >Retour à l'accueil</ion-button>

      <ion-card>
        <ion-card-header>
          <ion-card-title>Score</ion-card-title>
        </ion-card-header>
      
        <ion-card-content>
         {{ score }} /  {{ indexQuestion+1 }}
        </ion-card-content>

        <ion-progress-bar [value]="(indexQuestion+1) / questions.length"></ion-progress-bar>

      </ion-card>




  </div>
</ion-content>
